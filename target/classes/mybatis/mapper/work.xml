<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="work">


<select id="getInventoryStatusList" parameterType="Work" resultType="Work">
    SELECT * FROM tb_medication_situation
    WHERE date >= #{startDate}
</select>



<update id="insertinventoryStatus" parameterType="map">
  UPDATE tb_medication_situation
  SET
    `date` = #{date},
    `status` = #{status},
    `next_month` = #{next_month},
    `stock_cnt` = #{stock_cnt},
    <choose>
      <when test="drug_name == 'geomet_g1'">
        geomet_g1 = #{field_name}
      </when>
      <when test="drug_name == 'geomet_g2'">
        geomet_g2 = #{field_name}
      </when>
      <when test="drug_name == 'geomet_adding'">
        geomet_adding = #{field_name}
      </when>
      <when test="drug_name == 'pluse'">
        pluse = #{field_name}
      </when>
      <when test="drug_name == 'ml_h'">
        ml_h = #{field_name}
      </when>
      <when test="drug_name == 'ml_g'">
        ml_g = #{field_name}
      </when>
      <when test="drug_name == 'k_black'">
        k_black = #{field_name}
      </when>
      <when test="drug_name == 'naoh_99'">
        naoh_99 = #{field_name}
      </when>
      <when test="drug_name == 'sc_300a'">
        sc_300a = #{field_name}
      </when>
      <when test="drug_name == 'sc330b_3x'">
        sc330b_3x = #{field_name}
      </when>
      <when test="drug_name == 'sc330_liquid'">
        sc330_liquid = #{field_name}
      </when>
      <when test="drug_name == 'geomet_sus'">
        geomet_sus = #{field_name}
      </when>
      <when test="drug_name == 'ed2800_a_black'">
        ed2800_a_black = #{field_name}
      </when>
      <when test="drug_name == 'ed2800_b'">
        ed2800_b = #{field_name}
      </when>
      <when test="drug_name == 'geomet_005'">
        geomet_005 = #{field_name}
      </when>
      <when test="drug_name == 'geomet_069'">
        geomet_069 = #{field_name}
      </when>
      <when test="drug_name == 'geomet_p_210'">
        geomet_p_210 = #{field_name}
      </when>
      <when test="drug_name == 'geomet_sq_70'">
        geomet_sq_70 = #{field_name}
      </when>
    </choose>
  WHERE id = #{id}
</update>

</mapper>